---
- name: Install Chocolatey
  win_chocolatey:
    name: chocolatey
    state: present

- name: Install common tools via Chocolatey
  win_chocolatey:
    name:
      - vim
      - curl
      - wget
      - 7zip
      - git
      - googlechrome
      - notepadplusplus
    state: present

- name: Install AWS CLI
  win_chocolatey:
    name: awscli
    state: present

- name: Install Docker Desktop
  win_chocolatey:
    name: docker-desktop
    state: present

- name: Disable Windows Server Manager auto-start
  win_regedit:
    path: HKLM:\SOFTWARE\Microsoft\ServerManager
    name: DoNotOpenServerManagerAtLogon
    data: 1
    type: dword

- name: Disable IE Enhanced Security Configuration for Administrators
  win_regedit:
    path: HKLM:\SOFTWARE\Microsoft\Active Setup\Installed Components\{A509B1A7-37EF-4b3f-8CFC-4F3A74704073}
    name: IsInstalled
    data: 0
    type: dword

- name: Disable IE Enhanced Security Configuration for Users
  win_regedit:
    path: HKLM:\SOFTWARE\Microsoft\Active Setup\Installed Components\{A509B1A8-37EF-4b3f-8CFC-4F3A74704073}
    name: IsInstalled
    data: 0
    type: dword

- name: Disable Windows Firewall for all profiles
  win_firewall:
    state: disabled
    profiles:
      - Domain
      - Private
      - Public