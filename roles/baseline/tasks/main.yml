---
- name: Detect OS
  set_fact:
    is_windows: "{{ ansible_os_family == 'Windows' }}"
    is_ubuntu: "{{ ansible_distribution == 'Ubuntu' }}"
    is_talos: "{{ ansible_distribution == 'Talos' }}"

- name: Include Ubuntu tasks
  include_tasks: ubuntu.yml
  when: is_ubuntu

- name: Include Windows tasks
  include_tasks: windows.yml
  when: is_windows

- name: Include Talos tasks
  include_tasks: talos.yml
  when: is_talos